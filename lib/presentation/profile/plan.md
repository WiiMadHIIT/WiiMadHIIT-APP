# Profile é¡µé¢ MVVM æ¶æ„æ”¹é€ è®¡åˆ’

## ğŸ“‹ å½“å‰çŠ¶æ€åˆ†æ

### ç°æœ‰é—®é¢˜
- æ‰€æœ‰ä¸šåŠ¡é€»è¾‘éƒ½é›†ä¸­åœ¨ `profile_page.dart` ä¸­
- æ•°æ®æ˜¯ç¡¬ç¼–ç çš„ï¼Œæ²¡æœ‰ä»åç«¯è·å–
- ç¼ºä¹çŠ¶æ€ç®¡ç†å’Œé”™è¯¯å¤„ç†
- ä¸ç¬¦åˆ MVVM + Provider æ¶æ„è§„èŒƒ

### å½“å‰æ•°æ®ç»“æ„åˆ†æ
ä»ä»£ç ä¸­å¯ä»¥çœ‹åˆ°ä»¥ä¸‹ç¡¬ç¼–ç çš„æ•°æ®éœ€è¦ä»åç«¯è·å–ï¼š

## ğŸ”„ éœ€è¦ä»åç«¯ API è·å–çš„å‚æ•°

### 1. ç”¨æˆ·åŸºç¡€ä¿¡æ¯ï¼ˆå¿…éœ€ï¼‰
- âœ… **`userId`** - ç”¨æˆ·å”¯ä¸€æ ‡è¯†ç¬¦
- âœ… **`username`** - ç”¨æˆ·æ˜µç§°ï¼ˆå½“å‰ç¡¬ç¼–ç ä¸º 'John Doe'ï¼‰
- âœ… **`avatarUrl`** - ç”¨æˆ·å¤´åƒURLï¼ˆå½“å‰ä½¿ç”¨é»˜è®¤å¤´åƒï¼‰
- âœ… **`email`** - ç”¨æˆ·é‚®ç®±

### 2. ç”¨æˆ·ç»Ÿè®¡æ•°æ®ï¼ˆå¿…éœ€ï¼‰
- âœ… **`currentStreak`** - å½“å‰è¿ç»­è¿åŠ¨å¤©æ•°ï¼ˆå½“å‰ç¡¬ç¼–ç ä¸º '36 days'ï¼‰
- âœ… **`daysThisYear`** - ä»Šå¹´è¿åŠ¨å¤©æ•°ï¼ˆå½“å‰ç¡¬ç¼–ç ä¸º '120 days'ï¼‰

### 3. è£èª‰å¢™æ•°æ®ï¼ˆå¿…éœ€ï¼‰
- âœ… **`honors`** - è£èª‰åˆ—è¡¨ï¼ŒåŒ…å«ï¼š
  - `icon` - è£èª‰å›¾æ ‡
  - `label` - è£èª‰æ ‡é¢˜ï¼ˆå½“å‰ç¡¬ç¼–ç ä¸º 'Overall Champion', 'Best Streak'ï¼‰
  - `description` - è£èª‰æè¿°ï¼ˆå½“å‰ç¡¬ç¼–ç ä¸º 'HIIT Winner 2023', '60-Day Check-in Streak'ï¼‰
  - `timestep` - è·å¾—è£èª‰çš„æ—¶é—´æˆ³ï¼ˆæ¯«ç§’ï¼‰

### 4. æŒ‘æˆ˜è®°å½•æ•°æ®ï¼ˆå¿…éœ€ï¼‰
- âœ… **`challengeRecords`** - æŒ‘æˆ˜è®°å½•åˆ—è¡¨ï¼ŒåŒ…å«ï¼š
  - `id` - è®°å½•å”¯ä¸€æ ‡è¯†ç¬¦
  - `challengeId` - æŒ‘æˆ˜IDï¼Œç”¨äºä¸æ¿€æ´»å…³è”æ•°æ®å¯¹åº”
  - `index` - æ’å
  - `name` - æŒ‘æˆ˜åç§°ï¼ˆå½“å‰ç¡¬ç¼–ç ä¸º 'HIIT 7-Day Challenge', 'Yoga Masters Cup'ï¼‰
  - `status` - æŒ‘æˆ˜çŠ¶æ€ï¼ˆ'ended'ã€'ongoing' æˆ– 'ready'ï¼‰
  - `timestep` - æ—¶é—´æˆ³ï¼ˆæ¯«ç§’ï¼‰
  - `rank` - è·å¾—åæ¬¡ï¼ˆ'1st', '2nd', '3rd' æˆ– 'N/A'ï¼‰

### 5. æ‰“å¡è®°å½•æ•°æ®ï¼ˆå¿…éœ€ï¼‰
- âœ… **`checkinRecords`** - æ‰“å¡è®°å½•åˆ—è¡¨ï¼ŒåŒ…å«ï¼š
  - `id` - è®°å½•å”¯ä¸€æ ‡è¯†ç¬¦
  - `productId` - äº§å“IDï¼Œç”¨äºä¸æ¿€æ´»å…³è”æ•°æ®å¯¹åº”
  - `index` - åºå·
  - `name` - è®­ç»ƒåç§°ï¼ˆå½“å‰ç¡¬ç¼–ç ä¸º 'HIIT Pro', 'Yoga Flex'ï¼‰
  - `status` - æ´»åŠ¨çŠ¶æ€ï¼ˆ'ended'ã€'ongoing' æˆ– 'ready'ï¼‰
  - `timestep` - æ—¶é—´æˆ³ï¼ˆæ¯«ç§’ï¼‰
  - `rank` - æ’åï¼ˆ'1st', '2nd', '3rd' æˆ– 'N/A'ï¼‰

### 6. æ¿€æ´»å…³è”æ•°æ®ï¼ˆå¿…éœ€ï¼‰
- âœ… **`activate`** - æŒ‘æˆ˜ä¸äº§å“çš„å…³è”åˆ—è¡¨ï¼ŒåŒ…å«ï¼š
  - `challengeId` - æŒ‘æˆ˜IDï¼Œä¸ `challengeRecords` ä¸­çš„æŒ‘æˆ˜å¯¹åº”
  - `challengeName` - æŒ‘æˆ˜åç§°ï¼Œä¾¿äºUIæ˜¾ç¤ºå’Œç”¨æˆ·è¯†åˆ«
  - `productId` - äº§å“IDï¼Œä¸å¯¹åº”çš„äº§å“æœåŠ¡å…³è”
  - `productName` - äº§å“åç§°ï¼Œä¾¿äºUIæ˜¾ç¤ºå’Œç”¨æˆ·è¯†åˆ«

### 7. æ¿€æ´»ç æäº¤APIï¼ˆæ–°å¢ï¼‰
- ğŸ”„ **æ¿€æ´»ç æäº¤æ¥å£** - ç”¨äºæäº¤æ¿€æ´»ç è¿›è¡ŒéªŒè¯
  - **æ¥å£åœ°å€**: `POST /api/profile/activate`
  - **è¯·æ±‚å‚æ•°**:
    ```json
    {
      "productId": "product_001",
      "activationCode": "ABC123DEF456"
    }
    ```
  - **å“åº”æ ¼å¼**:
    ```json
    {
      "code": "A200",
      "message": "success",
      "data": {
        "submitted": true,
        "message": "Activation request submitted successfully"
      }
    }
    ```
  - **ä¸šåŠ¡é€»è¾‘**: 
    - æäº¤åä¸ç­‰å¾…è¿”å›çŠ¶æ€ï¼Œç›´æ¥æç¤ºç”¨æˆ·
    - æˆåŠŸæäº¤åæ˜¾ç¤º"æ¿€æ´»å·²ç”³è¯·ï¼Œè¯·è€å¿ƒç­‰å¾…1-5å¤©è¿›è¡Œå®¡æ ¸"
    - å¤±è´¥åæç¤º"æäº¤å¤±è´¥ï¼Œè¯·é‡æ–°æäº¤"
    - å®¡æ ¸é€šè¿‡åï¼Œå¯¹åº”çš„æŒ‘æˆ˜/æ‰“å¡è®°å½•ä¼šå‡ºç°åœ¨ `challengeRecords` å’Œ `checkinRecords` ä¸­ï¼ŒçŠ¶æ€ä¸º `ready`

### 6. å»ºè®®æ–°å¢çš„å‚æ•°
- ğŸ† **`achievements`** - æˆå°±åˆ—è¡¨
- ğŸ“ˆ **`weeklyStats`** - å‘¨ç»Ÿè®¡æ•°æ®
- ğŸ“ˆ **`monthlyStats`** - æœˆç»Ÿè®¡æ•°æ®
- ğŸ¯ **`goals`** - ç›®æ ‡è®¾ç½®
- ğŸ‘¥ **`friends`** - å¥½å‹åˆ—è¡¨
- ğŸ’ **`points`** - ç§¯åˆ†

## ğŸ“Š å»ºè®®çš„ API æ•°æ®ç»“æ„

### è·å–ç”¨æˆ·èµ„æ–™æ¥å£
**æ¥å£åœ°å€**: `GET /api/profile/list`

```json
{
  "code": "A200",
  "message": "success",
  "data": {
    "user": {
      "userId": "user_123456789",
      "username": "John Doe",
      "email": "john.doe@example.com",
      "avatarUrl": "https://cdn.example.com/avatars/user_123.jpg",
      "points": 2500
    },
    "stats": {
      "currentStreak": 36,
      "daysThisYear": 120
    },
    "honors": [
      {
        "id": "honor_001",
        "icon": "emoji_events",
        "label": "Overall Champion",
        "description": "HIIT Winner 2023",
        "timestep": 1703980800000  // 2023-12-31 è·å¾—æ—¶é—´
      },
      {
        "id": "honor_002",
        "icon": "star",
        "label": "Best Streak",
        "description": "60-Day Check-in Streak",
        "timestep": 1700006400000  // 2023-11-15 è·å¾—æ—¶é—´
      }
    ],
    "challengeRecords": [
      {
        "id": "challenge_001",
        "challengeId": "challenge_001",
        "index": 1,
        "name": "HIIT 7-Day Challenge",
        "status": "ended",
        "timestep": 1709251200000,  // 3å¤©å‰
        "rank": "2nd"
      },
      {
        "id": "challenge_002",
        "challengeId": "challenge_002",
        "index": 2,
        "name": "Yoga Masters Cup",
        "status": "ended",
        "timestep": 1708665600000,  // 7å¤©å‰
        "rank": "1st"
      },
       {
            "id": "challenge_003",
            "challengeId": "challenge_003",
            "index": 3,
            "name": "Summer Fitness Sprint",
            "status": "ongoing",
            "timestep": 1709344800000,  // ç°åœ¨ï¼ˆè¿›è¡Œä¸­ï¼‰
            "rank": "N/A"
          },
          {
            "id": "challenge_004",
            "challengeId": "challenge_004",
            "index": 4,
            "name": "Winter Strength Challenge",
            "status": "ready",
            "timestep": 1709431200000,  // æ˜å¤©ï¼ˆå‡†å¤‡å°±ç»ªï¼‰
            "rank": "N/A"
          },
          {
            "id": "challenge_005",
            "challengeId": "challenge_005",
            "index": 5,
            "name": "Cardio Endurance Test",
            "status": "ready",
            "timestep": 1709364000000,  // 6å°æ—¶åï¼ˆå‡†å¤‡å°±ç»ªï¼‰
            "rank": "N/A"
          }
    ],
    "checkinRecords": [
      {
        "id": "checkin_001",
        "productId": "product_001",
        "index": 1,
        "name": "HIIT Pro",
        "status": "ended",
        "timestep": 1709344800000,  // 2å°æ—¶å‰
        "rank": "2nd"
      },
      {
        "id": "checkin_002",
        "productId": "product_002",
        "index": 2,
        "name": "Yoga Flex",
        "status": "ended",
        "timestep": 1709337600000,  // 4å°æ—¶å‰
        "rank": "2nd"
      },
                {
            "id": "checkin_003",
            "productId": "product_003",
            "index": 3,
            "name": "Cardio Blast",
            "status": "ongoing",
            "timestep": 1709352000000,  // 2å°æ—¶åï¼ˆè¿›è¡Œä¸­ï¼‰
            "rank": "N/A"
          },
          {
            "id": "checkin_004",
            "productId": "product_004",
            "index": 4,
            "name": "Strength Training",
            "status": "ready",
            "timestep": 1709364000000,  // 6å°æ—¶åï¼ˆå‡†å¤‡å°±ç»ªï¼‰
            "rank": "N/A"
          }
    ],
    "activate": [
      {
        "challengeId": "challenge_001",
        "challengeName": "HIIT 7-Day Challenge",
        "productId": "product_001",
        "productName": "HIIT Pro Training Kit"
      },
      {
        "challengeId": "challenge_002", 
        "challengeName": "Yoga Masters Cup",
        "productId": "product_002",
        "productName": "Premium Yoga Mat Set"
      },
      {
        "challengeId": "challenge_003",
        "challengeName": "Summer Fitness Sprint",
        "productId": "product_003",
        "productName": "Fitness Tracker Pro"
      }
    ]
  }
}
```

### æ¿€æ´»ç æäº¤æ¥å£
**æ¥å£åœ°å€**: `POST /api/profile/activate`

**è¯·æ±‚å‚æ•°**:
```json
{
  "productId": "product_001",
  "activationCode": "ABC123DEF456"
}
```

**å“åº”æ ¼å¼**:
```json
{
  "code": "A200",
  "message": "success",
  "data": {
    "submitted": true,
    "message": "Activation request submitted successfully"
  }
}
```

### ç”¨æˆ·ä¿¡æ¯ä¿®æ”¹æ¥å£
**æ¥å£åœ°å€**: `PUT /api/profile/update`

**è¯·æ±‚å‚æ•°**:
```json
{
  "username": "New Username",  // å¦‚æœä¿®æ”¹äº†ç”¨æˆ·åï¼Œä¼ å…¥æ–°å€¼ï¼›å¦‚æœæ²¡ä¿®æ”¹ï¼Œä¼ å…¥ null
  "email": "new.email@example.com"  // å¦‚æœä¿®æ”¹äº†é‚®ç®±ï¼Œä¼ å…¥æ–°å€¼ï¼›å¦‚æœæ²¡ä¿®æ”¹ï¼Œä¼ å…¥ null
}
```

**æˆåŠŸå“åº”æ ¼å¼**:
```json
{
  "code": "A200",
  "message": "success",
  "data": {
    "updated": true,
    "message": "Profile updated successfully"
  }
}
```

```

**ä¸šåŠ¡é€»è¾‘**:
- åªæ›´æ–°ç”¨æˆ·ä¿®æ”¹çš„å­—æ®µï¼Œæœªä¿®æ”¹çš„å­—æ®µä¼ å…¥ `null`
- åç«¯éªŒè¯ä¿®æ”¹åçš„å­—æ®µæ ¼å¼å’Œå”¯ä¸€æ€§
- æˆåŠŸæ›´æ–°ååªè¿”å›æˆåŠŸçŠ¶æ€ï¼Œä¸è¿”å›ç”¨æˆ·ä¿¡æ¯
- å¤±è´¥æ—¶è¿”å›å…·ä½“çš„éªŒè¯é”™è¯¯ä¿¡æ¯
- å‰ç«¯æ ¹æ®æˆåŠŸçŠ¶æ€å†³å®šæ˜¯å¦æ›´æ–°æœ¬åœ°æ•°æ®

## ğŸ—ï¸ MVVM æ¶æ„æ”¹é€ è®¡åˆ’

### 1. ç›®å½•ç»“æ„
```
lib/
  data/
    api/
      profile_api.dart              // API è¯·æ±‚
    models/
      profile_api_model.dart        // API æ•°æ®æ¨¡å‹ï¼ˆåŒ…å«æ¿€æ´»ç›¸å…³å­—æ®µï¼‰
    repository/
      profile_repository.dart       // æ•°æ®ä»“åº“
  domain/
    entities/
      profile.dart                  // ä¸šåŠ¡å®ä½“
    services/
      profile_service.dart         // ä¸šåŠ¡æœåŠ¡
    usecases/
      get_profile_usecase.dart     // è·å–ç”¨æˆ·èµ„æ–™
      submit_activation_usecase.dart // æäº¤æ¿€æ´»ç 
  presentation/
    profile/
      profile_page.dart            // Viewï¼ˆUIï¼‰
      profile_viewmodel.dart       // ViewModelï¼ˆçŠ¶æ€ç®¡ç†ï¼‰
```

### 2. å„å±‚èŒè´£

#### **Domain å±‚**
- **`profile.dart`**: ç”¨æˆ·èµ„æ–™ä¸šåŠ¡å®ä½“
- **`user_stats.dart`**: ç”¨æˆ·ç»Ÿè®¡ä¸šåŠ¡å®ä½“
- **`honor.dart`**: è£èª‰ä¸šåŠ¡å®ä½“
- **`challenge_record.dart`**: æŒ‘æˆ˜è®°å½•ä¸šåŠ¡å®ä½“
- **`checkin_record.dart`**: æ‰“å¡è®°å½•ä¸šåŠ¡å®ä½“
- **`activation_request.dart`**: æ¿€æ´»è¯·æ±‚ä¸šåŠ¡å®ä½“
- **`profile_service.dart****: å¤æ‚ä¸šåŠ¡é€»è¾‘ï¼ˆå¦‚ç»Ÿè®¡è®¡ç®—ã€æˆå°±è§£é”ã€ç”¨æˆ·ä¿¡æ¯æ›´æ–°ï¼‰
- **`get_profile_usecase.dart`**: è·å–ç”¨æˆ·èµ„æ–™çš„ä¸šåŠ¡æµç¨‹
- **`submit_activation_usecase.dart`**: æäº¤æ¿€æ´»ç çš„ä¸šåŠ¡æµç¨‹
- **`update_profile_usecase.dart`**: æ›´æ–°ç”¨æˆ·ä¿¡æ¯çš„ä¸šåŠ¡æµç¨‹

#### **Data å±‚**
- **`profile_api.dart`**: ç½‘ç»œè¯·æ±‚å°è£…ï¼ˆåŒ…å«ç”¨æˆ·ä¿¡æ¯æ›´æ–°æ¥å£ï¼‰
- **`profile_api_model.dart`**: API å“åº”æ•°æ®ç»“æ„ï¼ˆåŒ…å«æ¿€æ´»ç›¸å…³å­—æ®µå’Œç”¨æˆ·ä¿¡æ¯æ›´æ–°å“åº”ï¼‰
- **`profile_repository.dart`**: æ•°æ®è½¬æ¢å’Œç¼“å­˜ï¼ˆåŒ…å«ç”¨æˆ·ä¿¡æ¯æ›´æ–°æ–¹æ³•ï¼‰

#### **Presentation å±‚**
- **`profile_page.dart`**: çº¯ UI å±•ç¤ºï¼Œé€šè¿‡ Provider ç›‘å¬çŠ¶æ€
- **`profile_viewmodel.dart`**: çŠ¶æ€ç®¡ç†ï¼Œè°ƒç”¨ UseCaseï¼ˆåŒ…å«ç”¨æˆ·ä¿¡æ¯æ›´æ–°çŠ¶æ€ç®¡ç†ï¼‰
- **`user_profile_edit_sheet.dart`**: ç”¨æˆ·ä¿¡æ¯ç¼–è¾‘å¼¹çª—ï¼ˆå·²å®ç°ï¼Œéœ€è¦é›†æˆæ›´æ–°é€»è¾‘ï¼‰

### 3. æ”¹é€ æ­¥éª¤

#### **ç¬¬ä¸€æ­¥ï¼šåˆ›å»º Domain å±‚**
1. åˆ›å»ºä¸šåŠ¡å®ä½“ç±»
2. åˆ›å»º `profile_service.dart` ä¸šåŠ¡æœåŠ¡
3. åˆ›å»º UseCase ç±»ï¼ˆget_profile_usecase.dartã€submit_activation_usecase.dart å’Œ update_profile_usecase.dartï¼‰

#### **ç¬¬äºŒæ­¥ï¼šåˆ›å»º Data å±‚**
1. åˆ›å»º `profile_api_model.dart` API æ¨¡å‹ï¼ˆåŒ…å«æ¿€æ´»ç›¸å…³å­—æ®µå’Œç”¨æˆ·ä¿¡æ¯æ›´æ–°å“åº”ï¼‰
2. åˆ›å»º `profile_api.dart` API è¯·æ±‚ï¼ˆåŒ…å«ç”¨æˆ·ä¿¡æ¯æ›´æ–°æ¥å£ï¼‰
3. åˆ›å»º `profile_repository.dart` æ•°æ®ä»“åº“ï¼ˆåŒ…å«ç”¨æˆ·ä¿¡æ¯æ›´æ–°æ–¹æ³•ï¼‰

#### **ç¬¬ä¸‰æ­¥ï¼šåˆ›å»º Presentation å±‚**
1. åˆ›å»º `profile_viewmodel.dart` çŠ¶æ€ç®¡ç†ï¼ˆåŒ…å«ç”¨æˆ·ä¿¡æ¯æ›´æ–°çŠ¶æ€ï¼‰
2. é‡æ„ `profile_page.dart` ä¸ºçº¯ UI ç»„ä»¶
3. é›†æˆæ¿€æ´»ç æäº¤åŠŸèƒ½
4. é›†æˆç”¨æˆ·ä¿¡æ¯æ›´æ–°åŠŸèƒ½ï¼ˆè¿æ¥ `user_profile_edit_sheet.dart`ï¼‰

#### **ç¬¬å››æ­¥ï¼šé›†æˆæµ‹è¯•**
1. æµ‹è¯•æ•°æ®æµ
2. æµ‹è¯•é”™è¯¯å¤„ç†
3. æµ‹è¯•çŠ¶æ€ç®¡ç†
4. æµ‹è¯•æ¿€æ´»ç æäº¤æµç¨‹
5. æµ‹è¯•ç”¨æˆ·ä¿¡æ¯æ›´æ–°æµç¨‹

## ğŸ¯ UI å¢å¼ºå»ºè®®

### å½“å‰æ˜¾ç¤ºå†…å®¹
1. ç”¨æˆ·å¤´åƒã€æ˜µç§°ã€ID
2. è¿åŠ¨å¤©æ•°ç»Ÿè®¡
3. è£èª‰å¢™
4. æŒ‘æˆ˜è®°å½•åˆ—è¡¨
5. æ‰“å¡è®°å½•åˆ—è¡¨

### å»ºè®®å¢å¼ºæ˜¾ç¤º
1. ğŸ† ç”¨æˆ·ç­‰çº§å’Œç§¯åˆ†
2. ğŸ“Š è¯¦ç»†ç»Ÿè®¡æ•°æ®ï¼ˆæ€»è®­ç»ƒæ¬¡æ•°ã€å¡è·¯é‡Œã€æ—¶é•¿ï¼‰
3. ğŸ¯ ç›®æ ‡è¿›åº¦æ¡
4. ğŸ“ˆ å‘¨/æœˆç»Ÿè®¡å›¾è¡¨
5. ğŸ‘¥ å¥½å‹åˆ—è¡¨
6. ğŸ… æˆå°±å¾½ç« 
7. ğŸ“± è®¾ç½®å…¥å£
8. ğŸ æ¿€æ´»å…³è”å±•ç¤ºï¼ˆæŒ‘æˆ˜ä¸äº§å“å…³è”ï¼Œä¾¿äºç”¨æˆ·äº†è§£å¯è·å¾—çš„å¥–åŠ±ï¼‰

## ğŸ”§ ä¸šåŠ¡é€»è¾‘å¢å¼º

### 1. ç»Ÿè®¡è®¡ç®—
```dart
class ProfileService {
  UserStats calculateStats(List<CheckinRecord> records) {
    // è®¡ç®—æ€»è®­ç»ƒæ¬¡æ•°ã€å¡è·¯é‡Œã€æ—¶é•¿ç­‰
  }
}
```

### 2. æˆå°±è§£é”
```dart
class ProfileService {
  List<Honor> checkAchievements(UserStats stats) {
    // æ£€æŸ¥æ˜¯å¦è§£é”æ–°æˆå°±
  }
}
```

### 3. ç­‰çº§è®¡ç®—
```dart
class ProfileService {
  int calculateLevel(int points) {
    // æ ¹æ®ç§¯åˆ†è®¡ç®—ç”¨æˆ·ç­‰çº§
  }
}
```

### 4. æ¿€æ´»å…³è”ç®¡ç†
```dart
class ProfileService {
  List<Activate> getAvailableActivations(List<ChallengeRecord> challenges) {
    // è·å–å¯æ¿€æ´»çš„æŒ‘æˆ˜ä¸äº§å“å…³è”
  }
  
  bool canActivateChallenge(String challengeId, UserStats stats) {
    // æ£€æŸ¥ç”¨æˆ·æ˜¯å¦æœ‰èµ„æ ¼æ¿€æ´»ç‰¹å®šæŒ‘æˆ˜
  }
}
```

### 5. æ¿€æ´»ç æäº¤ç®¡ç†ï¼ˆå¤ç”¨ profile ç»“æ„ï¼‰
```dart
class ProfileService {
  Future<bool> submitActivationCode(String productId, String activationCode) async {
    // æäº¤æ¿€æ´»ç è¿›è¡ŒéªŒè¯
    // è¿”å›æäº¤æ˜¯å¦æˆåŠŸ
  }
  
  void handleActivationSuccess() {
    // å¤„ç†æ¿€æ´»æˆåŠŸåçš„ä¸šåŠ¡é€»è¾‘
    // æ˜¾ç¤ºå®¡æ ¸ç­‰å¾…æç¤º
  }
  
  void handleActivationFailure() {
    // å¤„ç†æ¿€æ´»å¤±è´¥åçš„ä¸šåŠ¡é€»è¾‘
    // æç¤ºç”¨æˆ·é‡æ–°æäº¤
  }
}
```

### 6. ç”¨æˆ·ä¿¡æ¯æ›´æ–°ç®¡ç†
```dart
class ProfileService {
  Future<bool> updateUserProfile({
    String? username,
    String? email,
  }) async {
    // åªæ›´æ–°ç”¨æˆ·ä¿®æ”¹çš„å­—æ®µï¼Œæœªä¿®æ”¹çš„ä¼ å…¥ null
    // è°ƒç”¨ PUT /api/profile/update æ¥å£
    // è¿”å›æ›´æ–°æ˜¯å¦æˆåŠŸ
  }
  
  void handleProfileUpdateSuccess() {
    // å¤„ç†ç”¨æˆ·ä¿¡æ¯æ›´æ–°æˆåŠŸåçš„ä¸šåŠ¡é€»è¾‘
    // æ ¹æ®ç”¨æˆ·ä¿®æ”¹çš„å­—æ®µæ›´æ–°æœ¬åœ°ç”¨æˆ·ä¿¡æ¯
    // æ˜¾ç¤ºæˆåŠŸæç¤º
    // å…³é—­ç¼–è¾‘å¼¹çª—
  }
  
  void handleProfileUpdateFailure(Map<String, String> errors) {
    // å¤„ç†ç”¨æˆ·ä¿¡æ¯æ›´æ–°å¤±è´¥åçš„ä¸šåŠ¡é€»è¾‘
    // æ˜¾ç¤ºå…·ä½“çš„éªŒè¯é”™è¯¯ä¿¡æ¯
    // ä¿æŒå¼¹çª—æ‰“å¼€ï¼Œå…è®¸ç”¨æˆ·é‡æ–°è¾“å…¥
  }
  
  bool validateProfileChanges({
    String? username,
    String? email,
  }) {
    // éªŒè¯ç”¨æˆ·è¾“å…¥çš„ä¿¡æ¯
    // è¿”å›éªŒè¯æ˜¯å¦é€šè¿‡
  }
  
  void updateLocalProfile({
    String? username,
    String? email,
  }) {
    // æ ¹æ®APIè¿”å›çš„æˆåŠŸçŠ¶æ€ï¼Œæ›´æ–°æœ¬åœ°ç”¨æˆ·ä¿¡æ¯
    // åªæ›´æ–°ç”¨æˆ·å®é™…ä¿®æ”¹çš„å­—æ®µ
    // ä¿æŒå…¶ä»–å­—æ®µä¸å˜
  }
}
```

## ğŸ“ æ”¹é€ ä¼˜å…ˆçº§

### é«˜ä¼˜å…ˆçº§ï¼ˆç«‹å³æ”¹é€ ï¼‰
1. âœ… åŸºç¡€ç”¨æˆ·ä¿¡æ¯ä» API è·å–
2. âœ… ç»Ÿè®¡æ•°æ®ä» API è·å–
3. âœ… å®ç° MVVM æ¶æ„
4. âœ… æ·»åŠ é”™è¯¯å¤„ç†
5. ğŸ”„ æ¿€æ´»ç æäº¤åŠŸèƒ½
6. ğŸ”„ ç”¨æˆ·ä¿¡æ¯æ›´æ–°åŠŸèƒ½

### ä¸­ä¼˜å…ˆçº§ï¼ˆåç»­å¢å¼ºï¼‰
1. ğŸ”„ è£èª‰ç³»ç»Ÿ
2. ğŸ”„ æŒ‘æˆ˜è®°å½•ç®¡ç†
3. ğŸ”„ æ‰“å¡è®°å½•ç®¡ç†
4. ğŸ”„ ç­‰çº§ç§¯åˆ†ç³»ç»Ÿ

### ä½ä¼˜å…ˆçº§ï¼ˆä¼˜åŒ–ä½“éªŒï¼‰
1. ğŸ¨ UI å¢å¼ºæ˜¾ç¤º
2. ğŸ¨ åŠ¨ç”»æ•ˆæœä¼˜åŒ–
3. ğŸ¨ ç¼“å­˜æœºåˆ¶
4. ğŸ¨ ç¦»çº¿æ”¯æŒ

## ğŸ§ª æµ‹è¯•è®¡åˆ’

### å•å…ƒæµ‹è¯•
- Domain å±‚ä¸šåŠ¡é€»è¾‘æµ‹è¯•
- Repository å±‚æ•°æ®è½¬æ¢æµ‹è¯•
- ViewModel å±‚çŠ¶æ€ç®¡ç†æµ‹è¯•

### é›†æˆæµ‹è¯•
- å®Œæ•´æ•°æ®æµæµ‹è¯•
- API è°ƒç”¨æµ‹è¯•
- é”™è¯¯å¤„ç†æµ‹è¯•

### UI æµ‹è¯•
- é¡µé¢æ¸²æŸ“æµ‹è¯•
- ç”¨æˆ·äº¤äº’æµ‹è¯•
- çŠ¶æ€å˜åŒ–æµ‹è¯•

## ğŸ”„ æ•°æ®ç»“æ„ä¸€è‡´æ€§è¯´æ˜

### æŒ‘æˆ˜è®°å½•ã€æ‰“å¡è®°å½•ä¸è£èª‰å¢™ç»Ÿä¸€ç»“æ„
ä¸ºäº†ä¿æŒä»£ç çš„ä¸€è‡´æ€§å’Œå¯ç»´æŠ¤æ€§ï¼ŒæŒ‘æˆ˜è®°å½•ã€æ‰“å¡è®°å½•å’Œè£èª‰å¢™ç°åœ¨ä½¿ç”¨å®Œå…¨ç›¸åŒçš„å­—æ®µç»“æ„ï¼š

```dart
// é€šç”¨è®°å½•ç»“æ„
{
  "id": "unique_id",
  "index": 1,                    // è£èª‰å¢™å¯é€‰
  "name": "æ´»åŠ¨åç§°",             // è£èª‰å¢™ä¸ºè£èª‰æ ‡é¢˜
  "status": "ended" | "ongoing", // ç»Ÿä¸€çŠ¶æ€å­—æ®µï¼ˆè£èª‰å¢™ä¸ºè·å¾—çŠ¶æ€ï¼‰
  "timestep": 1709344800000,     // ç»Ÿä¸€æ—¶é—´æˆ³å­—æ®µ
  "rank": "1st" | "2nd" | "3rd" | "N/A"  // ç»Ÿä¸€æ’åå­—æ®µï¼ˆè£èª‰å¢™ä¸ºè£èª‰ç­‰çº§ï¼‰
}

// æŒ‘æˆ˜è®°å½•ç»“æ„ï¼ˆåŒ…å«challengeIdï¼‰
{
  "id": "unique_id",
  "challengeId": "challenge_xxx", // æŒ‘æˆ˜IDï¼Œç”¨äºä¸æ¿€æ´»å…³è”æ•°æ®å¯¹åº”
  "index": 1,
  "name": "æŒ‘æˆ˜åç§°",
  "status": "ended" | "ongoing" | "ready",
  "timestep": 1709344800000,
  "rank": "1st" | "2nd" | "3rd" | "N/A"
}

// æ‰“å¡è®°å½•ç»“æ„ï¼ˆåŒ…å«productIdï¼‰
{
  "id": "unique_id",
  "productId": "product_xxx",     // äº§å“IDï¼Œç”¨äºä¸æ¿€æ´»å…³è”æ•°æ®å¯¹åº”
  "index": 1,
  "name": "è®­ç»ƒåç§°",
  "status": "ended" | "ongoing" | "ready",
  "timestep": 1709344800000,
  "rank": "1st" | "2nd" | "3rd" | "N/A"
}

// æ¿€æ´»å…³è”ç»“æ„ï¼ˆå¤ç”¨ profile é€šç”¨ç»“æ„ï¼‰
{
  "challengeId": "challenge_001",     // æŒ‘æˆ˜ID
  "challengeName": "HIIT 7-Day Challenge",  // æŒ‘æˆ˜åç§°
  "productId": "product_001",         // å¯¹åº”çš„äº§å“ID
  "productName": "HIIT Pro Training Kit"    // äº§å“åç§°
}
```

### æ¿€æ´»ç ç›¸å…³æ•°æ®ç»“æ„ç®€åŒ–
ä¸ºäº†ç®€åŒ–è®¾è®¡ï¼Œæ¿€æ´»ç ç›¸å…³çš„æ•°æ®ç»“æ„é‡‡ç”¨ä»¥ä¸‹ç­–ç•¥ï¼š

1. **`activation_request.dart`**: åªåœ¨ entities å±‚æ·»åŠ ï¼Œç”¨äºæ¿€æ´»ç æäº¤çš„ä¸šåŠ¡é€»è¾‘
2. **API æ¨¡å‹**: æ¿€æ´»ç›¸å…³å­—æ®µç›´æ¥é›†æˆåˆ° `profile_api_model.dart` ä¸­ï¼Œå¤ç”¨ç°æœ‰çš„ profile ç»“æ„
3. **Repository**: æ¿€æ´»ç›¸å…³æ–¹æ³•ç›´æ¥æ·»åŠ åˆ° `profile_repository.dart` ä¸­
4. **Service**: æ¿€æ´»ç›¸å…³ä¸šåŠ¡é€»è¾‘ç›´æ¥æ·»åŠ åˆ° `profile_service.dart` ä¸­

è¿™æ ·å¯ä»¥å‡å°‘ä¸å¿…è¦çš„æ–‡ä»¶åˆ›å»ºï¼Œä¿æŒä»£ç ç»“æ„ç®€æ´ï¼ŒåŒæ—¶å¤ç”¨ç°æœ‰çš„ profile ç›¸å…³åŸºç¡€è®¾æ–½ã€‚

### çŠ¶æ€å­—æ®µè¯´æ˜
- **`status`**: 
  - `'ended'` - æ´»åŠ¨å·²ç»“æŸï¼Œæ˜¾ç¤ºæ’åå’Œå®Œæˆæ—¶é—´
  - `'ongoing'` - æ´»åŠ¨è¿›è¡Œä¸­ï¼Œæ˜¾ç¤ºå€’è®¡æ—¶å’Œå‚ä¸çŠ¶æ€
  - `'ready'` - æ´»åŠ¨å‡†å¤‡å°±ç»ªï¼Œç”¨æˆ·æœ‰èµ„æ ¼å‚ä¸ï¼Œæ˜¾ç¤ºå‡†å¤‡çŠ¶æ€å’Œå¼€å§‹æç¤º

### æ—¶é—´å­—æ®µè¯´æ˜
- **`timestep`**: æ¯«ç§’çº§æ—¶é—´æˆ³ï¼ˆç»Ÿä¸€æ—¶é—´å­—æ®µï¼‰
  - æ ¼å¼ï¼š`DateTime.now().add/subtract().millisecondsSinceEpoch`
  - å¯¹äºå·²ç»“æŸæ´»åŠ¨ï¼šè¡¨ç¤ºæ´»åŠ¨ç»“æŸæ—¶é—´ï¼ˆè¿‡å»æ—¶é—´ï¼‰
  - å¯¹äºè¿›è¡Œä¸­æ´»åŠ¨ï¼šè¡¨ç¤ºæ´»åŠ¨æˆªæ­¢æ—¶é—´ï¼ˆæœªæ¥æ—¶é—´ï¼‰
  - å¯¹äºè£èª‰å¢™ï¼šè¡¨ç¤ºè·å¾—è£èª‰çš„æ—¶é—´ï¼ˆè¿‡å»æ—¶é—´ï¼‰
  - æ›¿ä»£äº†åŸæ¥çš„ `participatedAt`ã€`lastCheckinAt` å’Œ `earnedAt` å­—æ®µ
  - ç¤ºä¾‹ï¼š
    - å·²ç»“æŸæ´»åŠ¨ï¼š`1709344800000` (2å°æ—¶å‰)
    - è¿›è¡Œä¸­æ´»åŠ¨ï¼š`1709352000000` (2å°æ—¶å)
    - è£èª‰è·å¾—ï¼š`1703980800000` (2023-12-31)

### æ’åå­—æ®µè¯´æ˜
- **`rank`**: 
  - `'1st'`, `'2nd'`, `'3rd'` - å‰ä¸‰å
  - `'N/A'` - æœªè·å¾—æ’åï¼ˆé€šå¸¸ç”¨äºè¿›è¡Œä¸­çš„æ´»åŠ¨ï¼‰

## ğŸ”„ æ¿€æ´»ç æäº¤æµç¨‹è¯´æ˜

### ç”¨æˆ·æ“ä½œæµç¨‹
1. **è¾“å…¥æ¿€æ´»ç **: ç”¨æˆ·åœ¨ `ActivateProductSheet` ä¸­è¾“å…¥æ¿€æ´»ç 
2. **æäº¤éªŒè¯**: ç‚¹å‡» "Activate" æŒ‰é’®ï¼Œè°ƒç”¨ `POST /api/profile/activate` æ¥å£
3. **å‚æ•°ä¼ é€’**: åŒæ—¶ä¼ é€’ `productId` å’Œ `activationCode`
4. **å¼‚æ­¥å¤„ç†**: ä¸ç­‰å¾…APIè¿”å›çŠ¶æ€ï¼Œç›´æ¥è¿›è¡Œä¸‹ä¸€æ­¥å¤„ç†

### æ•°æ®ç»“æ„å¤ç”¨è¯´æ˜
- **æ¿€æ´»è¯·æ±‚**: ä½¿ç”¨ `entities/activation_request.dart` ä¸­çš„ `ActivationRequest` å®ä½“
- **æ¿€æ´»å“åº”**: ç›´æ¥é›†æˆåˆ° `profile_api_model.dart` ä¸­ï¼Œå¤ç”¨ç°æœ‰çš„å“åº”ç»“æ„
- **æ¿€æ´»é€»è¾‘**: åœ¨ `profile_service.dart` ä¸­æ·»åŠ æ¿€æ´»ç›¸å…³æ–¹æ³•ï¼Œå¤ç”¨ç°æœ‰çš„ä¸šåŠ¡é€»è¾‘æ¡†æ¶

### æˆåŠŸæäº¤æµç¨‹
1. **æ˜¾ç¤ºæˆåŠŸæç¤º**: "æ¿€æ´»å·²ç”³è¯·ï¼Œè¯·è€å¿ƒç­‰å¾…1-5å¤©è¿›è¡Œå®¡æ ¸"
2. **å…³é—­å¼¹çª—**: è‡ªåŠ¨å…³é—­æ¿€æ´»å¼¹çª—
3. **ç­‰å¾…å®¡æ ¸**: ç”¨æˆ·éœ€è¦ç­‰å¾…åå°å®¡æ ¸
4. **å®¡æ ¸é€šè¿‡**: å®¡æ ¸é€šè¿‡åï¼Œå¯¹åº”çš„æŒ‘æˆ˜/æ‰“å¡è®°å½•ä¼šå‡ºç°åœ¨åˆ—è¡¨ä¸­ï¼ŒçŠ¶æ€ä¸º `ready`

### å¤±è´¥æäº¤æµç¨‹
1. **æ˜¾ç¤ºå¤±è´¥æç¤º**: "æäº¤å¤±è´¥ï¼Œè¯·é‡æ–°æäº¤"
2. **ä¿æŒå¼¹çª—**: å¼¹çª—ä¿æŒæ‰“å¼€çŠ¶æ€
3. **æ¸…ç©ºè¾“å…¥**: æ¸…ç©ºæ¿€æ´»ç è¾“å…¥æ¡†
4. **å…è®¸é‡è¯•**: ç”¨æˆ·å¯ä»¥é‡æ–°è¾“å…¥æ¿€æ´»ç è¿›è¡Œæäº¤

### çŠ¶æ€å˜åŒ–è¯´æ˜
- **æäº¤å‰**: ç”¨æˆ·çœ‹åˆ°å¯æ¿€æ´»çš„äº§å“åˆ—è¡¨
- **æäº¤ä¸­**: æ˜¾ç¤ºåŠ è½½çŠ¶æ€ï¼Œé˜²æ­¢é‡å¤æäº¤
- **æäº¤æˆåŠŸ**: æ˜¾ç¤ºå®¡æ ¸ç­‰å¾…æç¤º
- **å®¡æ ¸é€šè¿‡**: åœ¨ `challengeRecords` å’Œ `checkinRecords` ä¸­å‡ºç° `ready` çŠ¶æ€çš„é¡¹ç›®
- **å®¡æ ¸å¤±è´¥**: ç”¨æˆ·éœ€è¦é‡æ–°æäº¤æ¿€æ´»ç 

## ğŸ”„ ç”¨æˆ·ä¿¡æ¯æ›´æ–°æµç¨‹è¯´æ˜

### ç”¨æˆ·æ“ä½œæµç¨‹
1. **æ‰“å¼€ç¼–è¾‘å¼¹çª—**: ç”¨æˆ·ç‚¹å‡»ç¼–è¾‘æŒ‰é’®ï¼Œæ‰“å¼€ `UserProfileEditSheet`
2. **ä¿®æ”¹ä¿¡æ¯**: ç”¨æˆ·ä¿®æ”¹ç”¨æˆ·åæˆ–é‚®ç®±ï¼ˆæˆ–ä¸¤è€…éƒ½ä¿®æ”¹ï¼‰
3. **æäº¤æ›´æ–°**: ç‚¹å‡» "Save Changes" æŒ‰é’®ï¼Œè°ƒç”¨ `PUT /api/profile/update` æ¥å£
4. **å‚æ•°ä¼ é€’**: åªä¼ é€’ä¿®æ”¹çš„å­—æ®µï¼Œæœªä¿®æ”¹çš„å­—æ®µä¼ å…¥ `null`
5. **å¼‚æ­¥å¤„ç†**: ç­‰å¾…APIè¿”å›ç»“æœï¼Œæ ¹æ®ç»“æœå†³å®šä¸‹ä¸€æ­¥æ“ä½œ

### æ•°æ®ç»“æ„å¤ç”¨è¯´æ˜
- **æ›´æ–°è¯·æ±‚**: ä½¿ç”¨ç°æœ‰çš„ profile ç›¸å…³ç»“æ„ï¼Œåªä¼ é€’ä¿®æ”¹çš„å­—æ®µ
- **æ›´æ–°å“åº”**: ç®€åŒ–çš„å“åº”æ ¼å¼ï¼Œåªè¿”å›æˆåŠŸçŠ¶æ€
- **æ›´æ–°é€»è¾‘**: åœ¨ `profile_service.dart` ä¸­æ·»åŠ æ›´æ–°ç›¸å…³æ–¹æ³•ï¼Œå¤ç”¨ç°æœ‰çš„ä¸šåŠ¡é€»è¾‘æ¡†æ¶

### æˆåŠŸæ›´æ–°æµç¨‹
1. **æ˜¾ç¤ºæˆåŠŸæç¤º**: "Profile updated successfully"
2. **æ›´æ–°æœ¬åœ°æ•°æ®**: æ ¹æ®ç”¨æˆ·ä¿®æ”¹çš„å­—æ®µæ›´æ–°æœ¬åœ°ç”¨æˆ·ä¿¡æ¯
3. **å…³é—­å¼¹çª—**: è‡ªåŠ¨å…³é—­ç¼–è¾‘å¼¹çª—
4. **åˆ·æ–°UI**: é¡µé¢æ˜¾ç¤ºæ›´æ–°åçš„ç”¨æˆ·ä¿¡æ¯

### å¤±è´¥æ›´æ–°æµç¨‹
1. **æ˜¾ç¤ºå¤±è´¥æç¤º**: æ˜¾ç¤ºå…·ä½“çš„éªŒè¯é”™è¯¯ä¿¡æ¯
2. **ä¿æŒå¼¹çª—**: å¼¹çª—ä¿æŒæ‰“å¼€çŠ¶æ€
3. **æ˜¾ç¤ºé”™è¯¯**: åœ¨å¯¹åº”è¾“å…¥æ¡†ä¸‹æ–¹æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯
4. **å…è®¸é‡è¯•**: ç”¨æˆ·å¯ä»¥é‡æ–°è¾“å…¥ä¿¡æ¯è¿›è¡Œæäº¤

### çŠ¶æ€å˜åŒ–è¯´æ˜
- **æ›´æ–°å‰**: ç”¨æˆ·çœ‹åˆ°å½“å‰ç”¨æˆ·ä¿¡æ¯ï¼Œå¯ä»¥ä¿®æ”¹
- **æ›´æ–°ä¸­**: æ˜¾ç¤ºåŠ è½½çŠ¶æ€ï¼Œé˜²æ­¢é‡å¤æäº¤
- **æ›´æ–°æˆåŠŸ**: æ˜¾ç¤ºæˆåŠŸæç¤ºï¼Œå…³é—­å¼¹çª—ï¼Œæ›´æ–°æœ¬åœ°æ•°æ®
- **æ›´æ–°å¤±è´¥**: æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯ï¼Œä¿æŒå¼¹çª—æ‰“å¼€ï¼Œå…è®¸é‡è¯•

---

**æ€»ç»“**: é€šè¿‡ MVVM æ¶æ„æ”¹é€ ï¼ŒProfile é¡µé¢å°†å…·å¤‡æ›´å¥½çš„å¯ç»´æŠ¤æ€§ã€å¯æµ‹è¯•æ€§å’Œå¯æ‰©å±•æ€§ï¼ŒåŒæ—¶æä¾›æ›´ä¸°å¯Œçš„ç”¨æˆ·ç»Ÿè®¡å’Œæˆå°±ç³»ç»ŸåŠŸèƒ½ã€‚ç»Ÿä¸€çš„æ•°æ®ç»“æ„ç¡®ä¿äº†æŒ‘æˆ˜è®°å½•å’Œæ‰“å¡è®°å½•åœ¨ UI å±•ç¤ºå’Œä¸šåŠ¡é€»è¾‘ä¸Šçš„ä¸€è‡´æ€§ã€‚æ–°å¢çš„æ¿€æ´»ç æäº¤åŠŸèƒ½å®Œå–„äº†ç”¨æˆ·æ¿€æ´»äº§å“çš„å®Œæ•´æµç¨‹ï¼Œæä¾›äº†æ¸…æ™°çš„ç”¨æˆ·åé¦ˆå’ŒçŠ¶æ€ç®¡ç†ã€‚ç”¨æˆ·ä¿¡æ¯æ›´æ–°åŠŸèƒ½å…è®¸ç”¨æˆ·å®æ—¶ä¿®æ”¹ä¸ªäººèµ„æ–™ï¼Œæ”¯æŒéƒ¨åˆ†å­—æ®µæ›´æ–°ï¼Œæä¾›å‹å¥½çš„éªŒè¯åé¦ˆå’Œé”™è¯¯å¤„ç†ã€‚

**æ¶æ„ç®€åŒ–ä¼˜åŠ¿**: 
- åªåœ¨ entities å±‚æ·»åŠ  `activation_request.dart`ï¼Œå‡å°‘æ–‡ä»¶åˆ›å»º
- æ¿€æ´»ç›¸å…³å­—æ®µç›´æ¥é›†æˆåˆ°ç°æœ‰çš„ profile ç»“æ„ä¸­ï¼Œå¤ç”¨é€šç”¨åŸºç¡€è®¾æ–½
- ç”¨æˆ·ä¿¡æ¯æ›´æ–°åŠŸèƒ½å¤ç”¨ç°æœ‰çš„ profile ç›¸å…³åŸºç¡€è®¾æ–½ï¼Œæ— éœ€åˆ›å»ºé¢å¤–çš„æ–‡ä»¶
- ä¿æŒä»£ç ç»“æ„ç®€æ´ï¼Œä¾¿äºç»´æŠ¤å’Œæ‰©å±•
- ç¬¦åˆ DRYï¼ˆDon't Repeat Yourselfï¼‰åŸåˆ™ï¼Œé¿å…é‡å¤ä»£ç 

### è·å–æ¿€æ´»å…³è”åˆ†é¡µæ¥å£ï¼ˆæ–°å¢ï¼‰

ä¸ºä¾¿äºå‰ç«¯å•ç‹¬è·å– Profile ä¸­çš„ "activate" åˆ—è¡¨ï¼Œæ–°å¢ç‹¬ç«‹åˆ†é¡µæ¥å£ï¼Œæ•°æ®ç»“æ„å‚è€ƒ `ActivateGeneralPageDto`ï¼ˆä¸åŒ…å« `equipmentIds` å­—æ®µï¼‰ã€‚

- æ¥å£åœ°å€: `GET /api/activate/list`
- è¯·æ±‚å‚æ•°:
  - `page` æ•´æ•°ï¼Œé¡µç ï¼ˆä»1å¼€å§‹ï¼Œé»˜è®¤1ï¼‰
  - `size` æ•´æ•°ï¼Œæ¯é¡µå¤§å°ï¼ˆé»˜è®¤10ï¼‰

- æˆåŠŸå“åº”ç¤ºä¾‹:
```json
{
  "code": "A200",
  "message": "success",
  "data": {
    "activate": [
      {
        "challengeId": "20000000",
        "challengeName": "Christmas Boxing Challenge",
        "productId": "1000000000",
        "productName": "WiiMad Music Boxing Machine Beat X"
      },
      {
        "challengeId": "20000001",
        "challengeName": "Holiday Pilates Flow Challenge",
        "productId": "1000000001",
        "productName": "Plymax Pilates Reformer Flow X"
      }
    ],
    "total": 2,
    "currentPage": 1,
    "pageSize": 10
  }
}
```

- æ•°æ®ç»“æ„è¯´æ˜:
  - `activate` åˆ—è¡¨é¡¹ï¼ˆActivateGeneralDtoï¼‰
    - `challengeId`: æŒ‘æˆ˜ID
    - `challengeName`: æŒ‘æˆ˜åç§°
    - `productId`: å…³è”äº§å“IDï¼ˆequipmentIdï¼‰
    - `productName`: å…³è”äº§å“åç§°
  - `total`: æ€»è®°å½•æ•°
  - `currentPage`: å½“å‰é¡µ
  - `pageSize`: æ¯é¡µå¤§å°

- å¤‡æ³¨:
  - è¯¥æ¥å£ä»…è¿”å›åˆ†é¡µæ‰€éœ€ä¿¡æ¯ï¼Œä¸åŒ…å« `equipmentIds` èšåˆå­—æ®µï¼›è‹¥éœ€è¦æ‰¹é‡è®¾å¤‡è¯¦æƒ…ï¼Œå¯è°ƒç”¨è®¾å¤‡æœåŠ¡çš„æ‰¹é‡æŸ¥è¯¢æ¥å£ï¼ˆå¦‚ `/equipment/map-by-ids`ï¼‰ã€‚

### è·å–æ‰“å¡è®°å½•åˆ†é¡µæ¥å£ï¼ˆæ–°å¢ï¼‰

ä¸ºä¾¿äºå‰ç«¯å•ç‹¬è·å– Profile ä¸­çš„ "checkinRecords" åˆ—è¡¨ï¼Œæ–°å¢ç‹¬ç«‹åˆ†é¡µæ¥å£ï¼Œæ•°æ®ç»“æ„å‚è€ƒ `GET /api/profile/list` ä¸­çš„ `checkinRecords`ï¼ˆä»…åˆ†é¡µæ‰€éœ€å­—æ®µï¼‰ã€‚

- æ¥å£åœ°å€: `GET /api/checkin/list`
- è¯·æ±‚å‚æ•°:
  - `page` æ•´æ•°ï¼Œé¡µç ï¼ˆä»1å¼€å§‹ï¼Œé»˜è®¤1ï¼‰
  - `size` æ•´æ•°ï¼Œæ¯é¡µå¤§å°ï¼ˆé»˜è®¤10ï¼‰

- æˆåŠŸå“åº”ç¤ºä¾‹:
```json
{
  "code": "A200",
  "message": "success",
  "data": {
    "checkinRecords": [
      {
        "id": "checkin_001",
        "productId": "1000000000",
        "index": 1,
        "name": "HIIT Pro",
        "status": "ended",
        "timestep": 1709344800000,
        "rank": "2nd"
      },
      {
        "id": "checkin_002",
        "productId": "1000000001",
        "index": 2,
        "name": "Yoga Flex",
        "status": "ongoing",
        "timestep": 1709352000000,
        "rank": "N/A"
      }
    ],
    "total": 2,
    "currentPage": 1,
    "pageSize": 10
  }
}
```

- æ•°æ®ç»“æ„è¯´æ˜:
  - `checkinRecords` åˆ—è¡¨é¡¹ï¼ˆä¸ `GET /api/profile/list` çš„ `checkinRecords` ç›¸åŒï¼‰
    - `id`: è®°å½•å”¯ä¸€æ ‡è¯†ç¬¦
    - `productId`: å…³è”äº§å“ID
    - `index`: åºå·
    - `name`: è®­ç»ƒ/æ‰“å¡åç§°
    - `status`: `ended` | `ongoing` | `ready`
    - `timestep`: æ¯«ç§’çº§æ—¶é—´æˆ³
    - `rank`: `1st` | `2nd` | `3rd` | `N/A`
  - `total`: æ€»è®°å½•æ•°
  - `currentPage`: å½“å‰é¡µ
  - `pageSize`: æ¯é¡µå¤§å°

- å¤‡æ³¨:
  - è¯¥æ¥å£ä»…è¿”å›åˆ†é¡µæ‰€éœ€çš„æ‰“å¡è®°å½•åˆ—è¡¨ä¸åˆ†é¡µå…ƒæ•°æ®ï¼›
  - å¦‚éœ€æ‰¹é‡è¡¥å……äº§å“è¯¦æƒ…ï¼ˆå¦‚ç¼©ç•¥å›¾ã€æè¿°ï¼‰ï¼Œå»ºè®®è°ƒç”¨è®¾å¤‡æœåŠ¡çš„æ‰¹é‡æŸ¥è¯¢æ¥å£è¿›è¡Œèšåˆã€‚

### è·å–æŒ‘æˆ˜è®°å½•åˆ†é¡µæ¥å£ï¼ˆæ–°å¢ï¼‰

ä¸ºä¾¿äºå‰ç«¯å•ç‹¬è·å– Profile ä¸­çš„ "challengeRecords" åˆ—è¡¨ï¼Œæ–°å¢ç‹¬ç«‹åˆ†é¡µæ¥å£ï¼Œæ•°æ®ç»“æ„å‚è€ƒ `GET /api/profile/list` ä¸­çš„ `challengeRecords`ï¼ˆä»…åˆ†é¡µæ‰€éœ€å­—æ®µï¼‰ã€‚

- æ¥å£åœ°å€: `GET /api/challenge/list`
- è¯·æ±‚å‚æ•°:
  - `page` æ•´æ•°ï¼Œé¡µç ï¼ˆä»1å¼€å§‹ï¼Œé»˜è®¤1ï¼‰
  - `size` æ•´æ•°ï¼Œæ¯é¡µå¤§å°ï¼ˆé»˜è®¤10ï¼‰

- æˆåŠŸå“åº”ç¤ºä¾‹:
```json
{
  "code": "A200",
  "message": "success",
  "data": {
    "challengeRecords": [
      {
        "id": "challenge_001",
        "challengeId": "20000000",
        "index": 1,
        "name": "Christmas Boxing Challenge",
        "status": "ended",
        "timestep": 1709251200000,
        "rank": "2nd"
      },
      {
        "id": "challenge_002",
        "challengeId": "20000001",
        "index": 2,
        "name": "Holiday Pilates Flow Challenge",
        "status": "ready",
        "timestep": 1709431200000,
        "rank": "N/A"
      }
    ],
    "total": 2,
    "currentPage": 1,
    "pageSize": 10
  }
}
```

- æ•°æ®ç»“æ„è¯´æ˜:
  - `challengeRecords` åˆ—è¡¨é¡¹ï¼ˆä¸ `GET /api/profile/list` çš„ `challengeRecords` ç›¸åŒï¼‰
    - `id`: è®°å½•å”¯ä¸€æ ‡è¯†ç¬¦
    - `challengeId`: æŒ‘æˆ˜IDï¼ˆä¸æ¿€æ´»/èµ›äº‹ç­‰å…³è”ï¼‰
    - `index`: åºå·
    - `name`: æŒ‘æˆ˜åç§°
    - `status`: `ended` | `ongoing` | `ready`
    - `timestep`: æ¯«ç§’çº§æ—¶é—´æˆ³
    - `rank`: `1st` | `2nd` | `3rd` | `N/A`
  - `total`: æ€»è®°å½•æ•°
  - `currentPage`: å½“å‰é¡µ
  - `pageSize`: æ¯é¡µå¤§å°

- å¤‡æ³¨:
  - è¯¥æ¥å£ä»…è¿”å›åˆ†é¡µæ‰€éœ€çš„æŒ‘æˆ˜è®°å½•åˆ—è¡¨ä¸åˆ†é¡µå…ƒæ•°æ®ï¼›
  - å¦‚éœ€è¡¥å……æŒ‘æˆ˜è¯¦æƒ…ï¼ˆæ›´ä¸°å¯Œæ–‡æ¡ˆã€å›¾æ ‡ç­‰ï¼‰ï¼Œå»ºè®®è°ƒç”¨æŒ‘æˆ˜æœåŠ¡æˆ–é…ç½®æœåŠ¡çš„ç›¸åº”æŸ¥è¯¢æ¥å£ã€‚